# ENDPOINT FONKSİYONLARI VE SAYFALARI

## 1. TEST EMAIL ENDPOINT
**URL:** http://localhost:4000/test-email?city=Miami
**Dosya:** backend/src/testEmail.ts
**Fonksiyon:** testEmailHandler
**İşlev:** Belirtilen şehir için test email'i oluşturur ve HTML formatında döndürür
**Kullanılan Fonksiyonlar:**
- detectEventCategoryWithAI (backend/src/utils/ai.ts)
- generateSimpleTestTemplate (backend/src/utils/simpleTestTemplate.ts)
- Weather, news, events, sports verilerini çeker

## 2. EMAIL SENDING ENDPOINT
**URL:** http://localhost:4000/run-email-sending
**Dosya:** backend/src/emailSendingScheduler.ts
**Fonksiyon:** runEmailSendingJob()
**İşlev:** Tüm kullanıcılara günlük email gönderir
**Kullanılan Fonksiyonlar:**
- generateEmailHTML (backend/src/emailScheduler.ts)
- getAllUsers()
- getCachedCityData()
- sendEmailToUser()

## 3. DATA COLLECTION ENDPOINT
**URL:** http://localhost:4000/run-data-collection
**Dosya:** backend/src/dataCollectionScheduler.ts
**Fonksiyon:** runDataCollectionJob()
**İşlev:** Tüm şehirler için veri toplar ve cache'e kaydeder
**Kullanılan Fonksiyonlar:**
- getUniqueCities()
- collectAndCacheDataForCity()
- saveCityDataToCache()

## 4. SINGLE CITY DATA COLLECTION ENDPOINT
**URL:** http://localhost:4000/collect-city-data?city=Miami
**Dosya:** backend/src/dataCollectionScheduler.ts
**Fonksiyon:** collectAndCacheDataForCity(city)
**İşlev:** Tek bir şehir için veri toplar ve cache'e kaydeder
**Kullanılan Fonksiyonlar:**
- fetchAllCityData (backend/src/dataFetcher.ts)
- saveCityDataToCache()

## ÖZET
- **Test Email:** testEmail.ts → testEmailHandler
- **Email Sending:** emailSendingScheduler.ts → runEmailSendingJob()
- **Data Collection:** dataCollectionScheduler.ts → runDataCollectionJob()
- **Single City Data:** dataCollectionScheduler.ts → collectAndCacheDataForCity() 